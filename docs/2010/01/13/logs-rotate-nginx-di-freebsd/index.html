<!DOCTYPE html>
<html lang="en-us">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.55.6" />

    
    
    

<title>Logs Rotate Nginx di FreeBSD â€¢ </title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Logs Rotate Nginx di FreeBSD"/>
<meta name="twitter:description" content="File logs sering kali menjadi sebuah masalah ketika ukurannya menjadi semakin besar dan memakan sebagian besar hard disk server kita, tetapi di sisi lain file logs juga berguna untuk mencari masalah yang terjadi di server kita.
Gwa juga sempat mengalami beberapa masalah dengan file logs nginx di server FreeBSD. Permasalahan bermula dikarenakan gwa salah mengeset ukuran dari folder &lsquo;/var/logs&rsquo; yang hanya berukuran 2 Gb saja ( padahal file logs ukurannya bisa sampai 10 Gb keatas )."/>

<meta property="og:title" content="Logs Rotate Nginx di FreeBSD" />
<meta property="og:description" content="File logs sering kali menjadi sebuah masalah ketika ukurannya menjadi semakin besar dan memakan sebagian besar hard disk server kita, tetapi di sisi lain file logs juga berguna untuk mencari masalah yang terjadi di server kita.
Gwa juga sempat mengalami beberapa masalah dengan file logs nginx di server FreeBSD. Permasalahan bermula dikarenakan gwa salah mengeset ukuran dari folder &lsquo;/var/logs&rsquo; yang hanya berukuran 2 Gb saja ( padahal file logs ukurannya bisa sampai 10 Gb keatas )." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.rudylee.com/blog/2010/01/13/logs-rotate-nginx-di-freebsd/" />
<meta property="article:published_time" content="2010-01-13T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2010-01-13T00:00:00&#43;00:00"/>


    






<link rel="stylesheet" href="https://www.rudylee.com/blog/scss/hyde-hyde.2380269c92e7e39c11a852d74ebe3634002b1b3f46142353bdd7b4d4fe088725.css" integrity="sha256-I4AmnJLn45wRqFLXTr42NAArGz9GFCNTvde01P4IhyU=">


<link rel="stylesheet" href="https://www.rudylee.com/blog/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.rudylee.com/blog/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="https://www.rudylee.com/blog/favicon.png">
    
</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://www.rudylee.com/blog"></a>
      </span>
      
      
        <div class="author-image">
          <img src="https://www.gravatar.com/avatar/580b17799c8ed239b913eef56769170d?s=240&d=mp" class="img--circle img--headshot element--center" alt="gravatar">
        </div>
      
      <p class="site__description">
         Hi! I&#39;m Rudy Lee. Here are some thoughts of mine. 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle"></label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="https://www.rudylee.com/blog/">
						<span>Home</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="https://www.rudylee.com/blog/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="https://www.rudylee.com/blog/categories/">
						<span>Categories</span>
					</a>
				</li>
			 
		
		</li>
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/rudylee88" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	<a href="https://github.com/rudylee" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	<a href="https://linkedin.com/in/rudy-lee-12952b20" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
</section>

      </div>
    </div>
    
<div class="copyright">
  &copy; 2019 Rudy Lee
  
</div>



  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>Logs Rotate Nginx di FreeBSD</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Jan 13, 2010
    
    
    
      
      
          in
          
          
              <a class="badge badge-category" href="https://www.rudylee.com/blog/categories/unix-and-linux">UNIX AND LINUX</a>
              
          
      
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="https://www.rudylee.com/blog/tags/freebsd">freebsd</a>
           
      
          <a class="badge badge-tag" href="https://www.rudylee.com/blog/tags/log-rotate">log rotate</a>
           
      
          <a class="badge badge-tag" href="https://www.rudylee.com/blog/tags/logs">logs</a>
           
      
          <a class="badge badge-tag" href="https://www.rudylee.com/blog/tags/nginx">nginx</a>
           
      
          <a class="badge badge-tag" href="https://www.rudylee.com/blog/tags/rotate-logs">rotate logs</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 3 min read
</div>


  </header>
  
  
  <div class="post">
    <p>File logs sering kali menjadi sebuah masalah ketika ukurannya menjadi semakin besar dan memakan sebagian besar hard disk server kita, tetapi di sisi lain file logs juga berguna untuk mencari masalah yang terjadi di server kita.</p>

<p>Gwa juga sempat mengalami beberapa masalah dengan file logs nginx di server FreeBSD. Permasalahan bermula dikarenakan gwa salah mengeset ukuran dari folder &lsquo;/var/logs&rsquo; yang hanya berukuran 2 Gb saja ( padahal file logs ukurannya bisa sampai 10 Gb keatas ). Hal tersebut tentu saja mengakibatkan banyak user-user binus-access yang &ldquo;bernyanyi&rdquo; karena ga bisa login.</p>

<p>Selain itu ukuran file logs yang semakin lama semakin besar dan terkonsentrasi dalam 1 file tentu saja sangat mempersulit kita dalam melakukan tracing jika terjadi sesuatu, entah itu kena hack, kena dos, kena flood, kompor meleduk, anak hilang, blum sarapan, dll. Oleh karena itu kita akan menggunakan salah satu solusi yaitu rotate file log sehingga file log itu akan dipecah2 menjadi file2 kecil setiap harinya.</p>

<p>Kalau biasanya file logs itu cuma bentuknya &ldquo;error.log&rdquo; nanti akan muncul banyak file log sesuai dengan hasil rotate kita, contohnya &ldquo;error.log.0.bz1&rdquo; atau &ldquo;error.log.1.bz2&rdquo;.</p>

<p>Jadi langkah pertama yang gwa lakukan adalah mengubah tempat penyimpanan file log ke &lsquo;/usr/local&rsquo;, kira2 begini lah settingannya di nginx.conf</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-apache" data-lang="apache"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-apache" data-lang="apache">access_log <span style="color:#e6db74">/usr/local/log/binus-access.com.access.log</span>;
error_log <span style="color:#e6db74">/usr/local/log/binus-access.com.error.log</span>;</code></pre></td></tr></table>
</div>
</div>
<p>setelah itu kita cuma perlu melakukan perubahan di newsyslog.conf supaya bisa merotate log kita, kira-kira begini isi newsyslog.conf ( /etc/newsyslog.conf )</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/var/log/all.log                        <span style="color:#ae81ff">600</span>  <span style="color:#ae81ff">7</span>     *    @T00  J
/var/log/amd.log                        <span style="color:#ae81ff">644</span>  <span style="color:#ae81ff">7</span>     <span style="color:#ae81ff">100</span>  *     J
/var/log/auth.log                       <span style="color:#ae81ff">600</span>  <span style="color:#ae81ff">7</span>     <span style="color:#ae81ff">100</span>  *     JC
/var/log/console.log                    <span style="color:#ae81ff">600</span>  <span style="color:#ae81ff">5</span>     <span style="color:#ae81ff">100</span>  *     J
/var/log/cron                           <span style="color:#ae81ff">600</span>  <span style="color:#ae81ff">3</span>     <span style="color:#ae81ff">100</span>  *     JC
/var/log/daily.log                      <span style="color:#ae81ff">640</span>  <span style="color:#ae81ff">7</span>     *    @T00  JN
/var/log/debug.log                      <span style="color:#ae81ff">600</span>  <span style="color:#ae81ff">7</span>     <span style="color:#ae81ff">100</span>  *     JC
/var/log/kerberos.log                   <span style="color:#ae81ff">600</span>  <span style="color:#ae81ff">7</span>     <span style="color:#ae81ff">100</span>  *     J
/var/log/lpd-errs                       <span style="color:#ae81ff">644</span>  <span style="color:#ae81ff">7</span>     <span style="color:#ae81ff">100</span>  *     JC
/var/log/maillog                        <span style="color:#ae81ff">640</span>  <span style="color:#ae81ff">7</span>     *    @T00  JC
/var/log/messages                       <span style="color:#ae81ff">644</span>  <span style="color:#ae81ff">5</span>     <span style="color:#ae81ff">100</span>  *     JC
/var/log/monthly.log                    <span style="color:#ae81ff">640</span>  <span style="color:#ae81ff">12</span>    *    $M1D0 JN
/var/log/pflog                          <span style="color:#ae81ff">600</span>  <span style="color:#ae81ff">3</span>     <span style="color:#ae81ff">100</span>  *     JB    /var/run/pflogd.pid
/var/log/ppp.log        root:network    <span style="color:#ae81ff">640</span>  <span style="color:#ae81ff">3</span>     <span style="color:#ae81ff">100</span>  *     JC
/var/log/security                       <span style="color:#ae81ff">600</span>  <span style="color:#ae81ff">10</span>    <span style="color:#ae81ff">100</span>  *     JC
/var/log/sendmail.st                    <span style="color:#ae81ff">640</span>  <span style="color:#ae81ff">10</span>    *    <span style="color:#ae81ff">168</span>   B
/var/log/slip.log       root:network    <span style="color:#ae81ff">640</span>  <span style="color:#ae81ff">3</span>     <span style="color:#ae81ff">100</span>  *     JC
/var/log/weekly.log                     <span style="color:#ae81ff">640</span>  <span style="color:#ae81ff">5</span>     <span style="color:#ae81ff">1</span>    $W6D0 JN
/var/log/wtmp                           <span style="color:#ae81ff">644</span>  <span style="color:#ae81ff">3</span>     *    @01T05 B
/var/log/xferlog                        <span style="color:#ae81ff">600</span>  <span style="color:#ae81ff">7</span>     <span style="color:#ae81ff">100</span>  *     JC
/usr/local/log/*.log    root:wheel      <span style="color:#ae81ff">640</span>  <span style="color:#ae81ff">7</span>     *    @T00  GJ    /var/run/nginx.pid</code></pre></td></tr></table>
</div>
</div>
<p>jadi sebenarnya yang harus kita tambahkan adalah line terakhir yaitu</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/usr/local/log/*.log    root:wheel      <span style="color:#ae81ff">640</span>  <span style="color:#ae81ff">7</span>     *    @T00  GJ    /var/run/nginx.pid</code></pre></td></tr></table>
</div>
</div>
<p>/usr/local/log/*.log adalah tempat penyimpanan file log kita. Sementara untuk root:wheel itu adalah nama usernya, sementara sisanya ikutin saja la soalnya saya juga ga ngerti hohohoho.</p>

<p>Nah setelah setting itu, kita tinggal menunggu satu hari maka secara otomatis logs file kita akan ter-rotate sendiri. Silakan dicoba sendiri :D</p>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="https://www.rudylee.com/blog/2009/12/27/lithium-atau-li3-php-5.3-framework/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">&#39;Lithium atau Li3 : PHP 5.3&#43;&#43; Framework&#39;</span>
    </a>
    
    
    <a href="https://www.rudylee.com/blog/2010/01/27/install-php-fpm-di-freebsd-dengan-web-server-nginx/" class="navigation-next">
      <span class="navigation-tittle">Install PHP-FPM di FreeBSD dengan web server Nginx</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    
        <div id="disqus_thread"></div>
<script type="text/javascript">
    

    (function () {
    if (location.hostname === "localhost" ||
      location.hostname === "127.0.0.1" ||
      location.hostname === "") {
      return;
    }
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    var disqus_shortname = 'blogrudylee';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || 
      document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<noscript>
  Please enable JavaScript to view the
  <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by
  <span class="logo-disqus">Disqus</span>
</a>

    


</article>


        </div>
        
    

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-10301272-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>


    
    
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    




    



    </body>
</html>
